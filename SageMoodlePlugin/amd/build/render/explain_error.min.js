/**
 * Adds an "Explain Error" button to coderunner questions when test results indicate an error.
 * Clicking this button sends a request to explain the error through the chat.
 *
 * @module     block_sage/render/explain_error
 * @copyright  2025 Vasilevskiy Vladimir <vivasilevskiy_1@edu.hse.ru>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_sage/render/explain_error",["core/ajax","block_sage/api/chat_api","block_sage/questions/request_args","jquery"],(function(Ajax,chat_api,request_args,$){return{init:function(){const $testResults=$("div.coderunner-test-results");if($testResults.hasClass("bad")){const $button=$("<input/>",{type:"button",value:"Пояснить ошибку",class:"btn btn-secondary","data-initial-value":"Пояснить ошибку"});$button.on("click",(function(){var args=request_args.getRequestWithData();Ajax.call([{methodname:"block_sage_process_action_request",args:{...args,requestType:"ERROR_EXPLAIN"}}])[0].done((function(response){chat_api.isChatOpen()||chat_api.setChatState(!0),chat_api.addMessageToChat(response.message)})).fail((function(error){window.console.error("An error occured while sending a message: "+error.message)}))})),$testResults.append($button)}}}}));

//# sourceMappingURL=explain_error.min.js.map